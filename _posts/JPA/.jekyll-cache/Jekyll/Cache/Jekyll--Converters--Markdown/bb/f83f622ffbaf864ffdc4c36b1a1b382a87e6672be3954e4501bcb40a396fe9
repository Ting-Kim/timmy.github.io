I"<h1 id="jpa-조회-시-단일-데이터-보장">[JPA] 조회 시 단일 데이터 보장</h1>

<p>pk가 아닌 컬럼으로 조회한 경우, 기획한 내용을 바탕으로 생각하면 데이터가 하나가 나와야 하는데 그렇지 못하는 경우가 있다.</p>

<p>예를 들어, 찜한 데이터 목록을 불러올 때, <code class="language-plaintext highlighter-rouge">itemId</code>와 <code class="language-plaintext highlighter-rouge">userId</code>를 조건으로 쿼리를 날렸을 때 데이터는 한 건이거나 없어야 한다.</p>

<p><img src="https://github.com/Ting-Kim/Ting-kim.github.io/blob/main/images/20210920_1.png" alt="20210920_1.png" /></p>

<p>하지만, 위 코드를 보면 연관관계가 걸려있을 뿐 어떠한 제약이 걸려있지 않기 때문에 <code class="language-plaintext highlighter-rouge">queryDSL</code>이나 <code class="language-plaintext highlighter-rouge">JPA Repository</code> 메서드를 사용하면 반환되는 자료형은 <code class="language-plaintext highlighter-rouge">List</code>이다.</p>

<p>그래서 <code class="language-plaintext highlighter-rouge">unique</code> 제약을 걸 필요가 있을 것 같다.</p>

<p>아래 참고 링크에 단일 컬럼, 이중 컬럼에 대한 <code class="language-plaintext highlighter-rouge">unique</code> 제약 조건을 <code class="language-plaintext highlighter-rouge">JPA</code>에서 사용하는 방법이 나와있다.</p>

<p>참고 자료</p>

<ul>
  <li><a href="https://velog.io/@hyeminn/JPA-%EB%91%90%EA%B0%9C-%EC%9D%B4%EC%83%81-%EC%BB%AC%EB%9F%BC-UNIQUE-%EC%A1%B0%EA%B1%B4-%EC%84%A4%EC%A0%95">https://velog.io/@hyeminn/JPA-두개-이상-컬럼-UNIQUE-조건-설정</a></li>
</ul>
:ET